<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Contact Hub | Cyberpunk Glow</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<!-- QR Code Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
/* ============ GLOBAL ============ */
body{
  margin:0;
  font-family:'Orbitron',sans-serif;
  background:#080016;
  color:#fff;
}
.neon{
  text-shadow:0 0 8px #ff00ff,0 0 20px #00ffff;
}
button{
  cursor:pointer;
  border:none;
  border-radius:10px;
  background:linear-gradient(45deg,#ff00ff,#00ffff);
  color:#fff;
  padding:10px 15px;
  box-shadow:0 0 15px #ff00ff;
}
button:hover{transform:scale(1.05);}

/* ============ HEADER ============ */
header{
  text-align:center;
  padding:40px;
}
header h1{
  font-size:3.5em;
}

/* ============ FORMS ============ */
.form{
  width:350px;
  margin:30px auto;
  background:rgba(0,0,0,.6);
  padding:30px;
  border-radius:20px;
  box-shadow:0 0 30px #ff00ff;
}
.form input{
  width:100%;
  padding:12px;
  margin:8px 0;
  background:#000;
  border:1px solid #00ffff;
  border-radius:8px;
  color:#fff;
}

/* ============ DASHBOARD ============ */
.dashboard{
  display:none;
  height:100vh;
}
.sidebar{
  width:230px;
  background:#050014;
  padding:20px;
  box-shadow:0 0 20px #ff00ff;
}
.sidebar button{
  width:100%;
  margin:6px 0;
  background:transparent;
  box-shadow:none;
  text-align:left;
  color:#00ffff;
}
.sidebar button:hover{color:#ff00ff}

.main{
  flex:1;
  padding:20px;
  overflow:auto;
}

/* ============ CONTACT CARD ============ */
.contact{
  background:#0c0025;
  margin:10px 0;
  padding:15px;
  border-radius:15px;
  box-shadow:0 0 15px #00ffff;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.actions button{
  margin-left:6px;
}

/* ============ MODALS ============ */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  justify-content:center;
  align-items:center;
}
.modal-box{
  background:#06001b;
  padding:25px;
  border-radius:20px;
  width:380px;
  box-shadow:0 0 30px #ff00ff;
}
.modal-box input,select{
  width:100%;
  margin:6px 0;
  padding:10px;
  background:#000;
  border:1px solid #00ffff;
  color:#fff;
  border-radius:8px;
}

/* ============ VIDEO CALL ============ */
video{
  width:100%;
  border-radius:15px;
  box-shadow:0 0 20px #00ffff;
}
</style>
</head>

<body>

<header>
<h1 class="neon">â˜¢ CONTACT HUB â˜¢</h1>
<button onclick="show('login')">ğŸ” Login</button>
<button onclick="show('register')">ğŸ“ Register</button>
</header>

<!-- REGISTER -->
<div id="register" class="form" style="display:none">
<h2>ğŸ“ Register</h2>
<input id="ruser" placeholder="Username (â‰¤50 chars)" maxlength="50">
<input id="remail" placeholder="Email">
<input id="rpass" type="password" placeholder="Password (no spaces)">
<input id="rconf" type="password" placeholder="Confirm Password">
<button onclick="register()">Create Account</button>
</div>

<!-- LOGIN -->
<div id="login" class="form" style="display:none">
<h2>ğŸ” Login</h2>
<input id="luser" placeholder="Username">
<input id="lpass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dash" class="dashboard">
<div class="sidebar">
<button onclick="filterType('all')">ğŸ“’ All</button>
<button onclick="filterType('fav')">â¤ï¸ Favorites</button>
<button onclick="filterType('private')">ğŸ” Private</button>
<button onclick="filterType('emergency')">ğŸš¨ Emergency</button>
<button onclick="openAdd()">â• Add Contact</button>
<button onclick="voiceSearch()">ğŸ™ Voice Search</button>
<button onclick="logout()">ğŸšª Logout</button>
</div>

<div class="main">
<input id="search" placeholder="ğŸ” Search..." oninput="render()">
<div id="list"></div>
</div>
</div>

<!-- ADD / EDIT CONTACT -->
<div id="addModal" class="modal">
<div class="modal-box">
<h3>â• Add / Edit Contact</h3>
<input id="cname" placeholder="Name">
<input id="cnum" placeholder="Number">
<input id="cemail" placeholder="Email">
<input id="cgroup" placeholder="Group">
<label><input type="checkbox" id="cfav"> Favorite</label>
<label><input type="checkbox" id="cpri"> Private</label>
<label><input type="checkbox" id="cemg"> Emergency</label>
<button onclick="saveContact()">ğŸ’¾ Save</button>
<button onclick="closeAdd()">âŒ Close</button>
</div>
</div>

<!-- PRIVATE PIN -->
<div id="pinModal" class="modal">
<div class="modal-box">
<h3>ğŸ” Enter PIN</h3>
<input id="pinInput" type="password" placeholder="4-digit PIN">
<button onclick="unlockPrivate()">Unlock</button>
</div>
</div>

<!-- VIDEO CALL -->
<div id="videoModal" class="modal">
<div class="modal-box">
<h3>ğŸ¥ Video Call</h3>
<video id="video" autoplay></video>
<button onclick="endCall()">âŒ End</button>
</div>
</div>

<!-- QR -->
<div id="qrModal" class="modal">
<div class="modal-box">
<h3>ğŸ”³ Contact QR</h3>
<div id="qr"></div>
<button onclick="closeQR()">Close</button>
</div>
</div>

<script>
/* ===== STORAGE ===== */
let users=JSON.parse(localStorage.users||"[]");
let current=null;
let editIndex=null;
let showPrivate=false;

/* ===== SHOW ===== */
function show(id){
  register.style.display=login.style.display='none';
  if(id) document.getElementById(id).style.display='block';
}

/* ===== AUTH ===== */
function register(){
  if(rpass.value.includes(" ")) return alert("No spaces allowed");
  if(rpass.value!==rconf.value) return alert("Password mismatch");
  users.push({u:ruser.value,p:rpass.value,contacts:[],pin:"1234"});
  localStorage.users=JSON.stringify(users);
  alert("Registered");
  show('login');
}
function login(){
  current=users.find(x=>x.u===luser.value && x.p===lpass.value);
  if(!current) return alert("Invalid login");
  dash.style.display='flex';
  login.style.display='none';
  render();
}
function logout(){location.reload();}

/* ===== CONTACTS ===== */
function openAdd(){
  addModal.style.display='flex';
}
function closeAdd(){addModal.style.display='none'; editIndex=null;}
function saveContact(){
  let c={
    name:cname.value, num:cnum.value, email:cemail.value,
    group:cgroup.value, fav:cfav.checked,
    pri:cpri.checked, emg:cemg.checked
  };
  editIndex===null?current.contacts.push(c):current.contacts[editIndex]=c;
  localStorage.users=JSON.stringify(users);
  closeAdd(); render();
}
function render(){
  list.innerHTML='';
  let q=search.value.toLowerCase();
  current.contacts.forEach((c,i)=>{
    if(c.pri && !showPrivate) return;
    if(!c.name.toLowerCase().includes(q)) return;
    let d=document.createElement('div');
    d.className='contact';
    d.innerHTML=`
      <div>${c.pri?'ğŸ”':''} <b>${c.name}</b><br>${c.num}</div>
      <div class="actions">
        <button onclick="call('${c.num}')">ğŸ“</button>
        <button onclick="sms('${c.num}')">ğŸ’¬</button>
        <button onclick="videoCall()">ğŸ¥</button>
        <button onclick="qr('${c.name}','${c.num}')">ğŸ”³</button>
        <button onclick="edit(${i})">âœï¸</button>
      </div>`;
    list.appendChild(d);
  });
}
function edit(i){
  let c=current.contacts[i];
  cname.value=c.name;cnum.value=c.num;cemail.value=c.email;
  cgroup.value=c.group;cfav.checked=c.fav;cpri.checked=c.pri;cemg.checked=c.emg;
  editIndex=i; openAdd();
}

/* ===== COMMUNICATION ===== */
function call(n){location.href=`tel:${n}`;}
function sms(n){location.href=`sms:${n}`;}

/* ===== VIDEO CALL (WebRTC demo) ===== */
async function videoCall(){
  videoModal.style.display='flex';
  let stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});
  video.srcObject=stream;
}
function endCall(){
  let v=video.srcObject;
  v.getTracks().forEach(t=>t.stop());
  videoModal.style.display='none';
}

/* ===== QR ===== */
function qr(name,num){
  qrModal.style.display='flex';
  qr.innerHTML='';
  new QRCode(qr,{text:`Name:${name},Phone:${num}`,width:200,height:200});
}
function closeQR(){qrModal.style.display='none';}

/* ===== PRIVATE PIN ===== */
function filterType(t){
  if(t==='private'){ pinModal.style.display='flex'; }
}
function unlockPrivate(){
  if(pinInput.value===current.pin){
    showPrivate=true;
    pinModal.style.display='none';
    render();
  }else alert("Wrong PIN");
}

/* ===== VOICE SEARCH ===== */
function voiceSearch(){
  let rec=new webkitSpeechRecognition();
  rec.onresult=e=>{
    search.value=e.results[0][0].transcript;
    render();
  };
  rec.start();
}
</script>

</body>
</html>
